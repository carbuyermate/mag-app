# Mobilny Asystent Geodezyjny (MAG) - Dokumentacja i Specyfikacja Projektu

## 1. O aplikacji (Czym jest MAG?)
Mobilny Asystent Geodezyjny to ultralekka, bezpieczna, jednoplikowa aplikacja internetowa (Single-Page Application w architekturze HTML/CSS/JS), pełniąca funkcję podręcznego systemu informacji przestrzennej (GIS). Służy do błyskawicznej weryfikacji danych geodezyjnych, topograficznych (wysokość n.p.m.), administracyjnych, infrastrukturalnych i ekologicznych na ekranie telefonu lub komputera. Daje wgląd do baz planowanych budów i pozwoleń (GUNB), bez konieczności instalowania oprogramowania czy zakładania kont.

## 2. Dla kogo jest ta aplikacja? (Grupa Docelowa)
Narzędzie zostało stworzone z myślą o profesjonalistach pracujących "w terenie" oraz osobach potrzebujących natychmiastowego dostępu do otwartych danych państwowych:
- Geodeci i inżynierowie budownictwa (rozpoznanie terenu, lokalizacja punktów startowych, weryfikacja rzędnych terenu, uzbrojenia)
- Architekci, planiści i projektanci (szybka ocena chłonności działki, form ukształtowania terenu, kolizji z sieciami, stref z ochrony GDOŚ)
- Deweloperzy i inwestorzy prywatni (szybki skan sąsiedztwa pod kątem wydanych pozwoleń na budowę, zakup działki i sprawdzanie ksiąg)
- Urzędnicy, leśnicy i inspektorzy nadzoru budowlanego (kontrola w terenie z wykorzystaniem dokładnego GPS)
- Rzeczoznawcy majątkowi i pośrednicy nieruchomości (wycena zdalna, badanie obciążeń, szybki dostęp do struktury organów)
- Osoby prywatne poszukujące działki budowlanej lub rekreacyjnej (weryfikacja czy w sąsiedztwie nie buduje się duża ferma lub fabryka na podstawie rejestru urzędu GUNB)

## 3. Jaki rozwiązuje problem? (Wartość dla Użytkownika)
Praca z oficjalnym portalem Geoportal.gov.pl na urządzeniach mobilnych jest w terenie wysoce niepraktyczna (duże obciążenie RAM, przycinające się menu). Mobilny Asystent Geodezyjny radykalnie ułatwia ten proces:
- **Błyskawiczny czas ładowania:** Ekstremalnie lekka architektura ważąca ułamek wielkości wielkich systemów mapowych, lądująca w telefonie natychmiast.
- **Interfejs "Mobile-First":** Intuicyjne menu boczne, proste przełączniki dla urządzeń infrastrukturalnych i stref środowiskowych obsługiwane jednym palcem.
- **Paczki informacyjne w locie:** Automatyczne pobieranie wysokości terenu na podstawie map Numerycznego Modelu Terenu oraz pobieranie geolokalizacji z uwzględnieniem tolerancji marginesu błędu urządzenia.
- **Rozwiązywanie węzłów biurokratycznych:** Generuje prefiksy wydziałów sądowych dla numerów Ksiąg Wieczystych, kieruje od razu do właściwego urzędu (nawigacja w mapach Google) i jednym kliknięciem przenosi do formularzy GUNB dla badanej parceli.
- **Agregacja (ONE-STOP-SHOP):** Łączy bazy GUGiK (kataster i uzbrojenie), GDOŚ (rezerwaty, parki) oraz GUNB (pozwolenia) na jednym, płynnie działającym ekranie.

## 4. Czym różni się od rządowych i komercyjnych portali rynkowych? (Przewagi Konkurencyjne)
- **Ascetyczne minimum (No Over-engineering):** Celuje tylko w najważniejsze dla poszukiwaczy informacje: "Gdzie jestem, jaki to adres, czy jest woda i prąd, na jakiej jestem wysokości, czy to strefa chroniona i co tu się będzie budować?".
- **Brak backendu i absolutna prywatność:** Działa lokalnie u klienta (P2P względem serwerów urzędowych). Nie wymaga żadnej bazy danych po stronie twórców, nie loguje informacji o tym, jakie działki sprawdzał inwestor. Gwarantuje prywatność deweloperom i osobom decyzyjnym.
- **Niestandardowe podejście UX:** Łączy surowe warstwy wektorowe (WFS/WMS) z przyjaznymi kartami ("Smart Links") odwołującymi się bezpośrednio do narzędzi, z których użytkownik korzysta na co dzień (np. e-KW, Wyszukiwarka RWDZ urzędu budowlanego).
- **Elastyczne obejście blokad urzędowych (RWDZ):** Reakcja na CAPTCH-e w rejestrach - system zamiast udawać bota, asystuje człowiekowi ładując dla niego na życzenie właściwe strony w zewnętrznych zakładkach ze sparametryzowanym miejscem.

## 5. Kluczowe Funkcje Aplikacji
- ** Geolokalizacja GPS na żywo:** Pozycjonowanie z wyświetlaniem rzeczywistej dokładności pomiarowej (w metrach) pobieranej z odbiornika satelitarnego telefonu.
- ** Inteligentna Wyszukiwarka Adresów:** System autouzupełniania bazujący wpierw na precyzyjnym państwowym API (ULDK GUGiK), a jako fallback – na silniku Nominatim (OSM).
- ** Panel Informacyjny Działki w Czasie Rzeczywistym:**
  - **Lokalizacja i TERYT:** Pełny adres geodezyjny.
  - **Wysokość terenu (NMT):** Odczyt wysokości metrach nad poziomem morza w klikniętym punkcie z dokładnego ukształtowania GUGiK.
  - **Ograniczenia Środowiskowe (GDOŚ):** Automatyczna kalkulacja kolizji (intersekcji obrysu geometrii działki) ze wszystkimi państwowymi formami ochrony środowiska za pomocą WFS `CQL_FILTER`.
  - **Wnioski i Pozwolenia (GUNB):** Zautomatyzowany łącznik wysyłający użytkownika wprost do państwowego rejestru RWDZ w celu sprawdzenia wydanych decyzi i toczących się postępowań dla danej lokalizacji.
  - **Sprawy Urzędowe i Smart Links:** Wyliczenia właściwości sądowej Księgi Wieczystej wraz z gotowymi odnośnikami do Google Maps z nawigacją do Starostwa i Sądu. Kierowanie do państwowego portalu KW.
- ** Uzbrojenie Terenu na Żywo (KIUT):** Weryfikacja obecności kabli (Prąd, Woda, Gaz, Telekomunikacja itd.) z renderingiem poszerzonym (DPI Hack) nakładanym bezpośrednio na satelitę ze Starostw.
- ** Multi-warstwowy podkład:** Klasyczny OSM, Google Satelita, Esri Satelita, Ortofotomapa rządu. Płynnie powiększana poza limity dzięki zniekształcaniu wektorowemu bazy (Deep Zoom do 24x).

## 6. Architektura i Źródła Danych (API & Bazy)
Czysty frontend (HTML5, Vanilla CSS3, Vanilla JS ES6) napędzany silnikiem **Leaflet.js** połączonym z **Proj4js** do translacji natywnej rzutowania sferycznego do układu płaskiego PUWG 1992 (EPSG:2180). Bazy są doczytywane w sposób asynchroniczny z API rządowych za pomocą Promise.allSettled ograniczając czas reakcji.

### A. Główny Urząd Geodezji i Kartografii (GUGiK)
- **Ewidencja Gruntów (KIEG):** Podział i kontury, budynki.
- **Uzbrojenie Terenu (KIUT):** Warstwy infrastrukturalne podziemne i nadziemne ciągnięte z powiatów. Modyfikowane wymuszeniem 150dpi High-Resolution do smartfonów.
- **Usługa Lokalizacji (ULDK):** Zamienia formatki XY na kształty WKT Poligon dla analiz GDOŚ, tłumaczy geometrię i dostarcza wyszukiwarkę.
- **Numeryczny Model Terenu (NMT):** Baza rastrowa wyciągająca wysokość za pomocą `GetFeatureInfo` dla wskazanego zapytania przestrzennego.

### B. Generalna Dyrekcja Ochrony Środowiska (GDOŚ)
- Silnik mapowy z warstwami Natura 2000, Parkami, Rezerwatami jako estetyczne tło na mapie.
- **WFS Spatial Query:** Analizy geometryczne i przestrzenne (intersects) by poinformować o "Kolidujących formach ochrony" z prawnego punktu widzenia nałożonych na poligon ewidencyjny.

### C. Główny Urząd Nadzoru Budowlanego (GUNB)
- **Wyszukiwarka RWDZ:** Rejestr wniosków, decyzji i zgłoszeń udostępniający inwestorom wykaz działań dla danego terenu (udostępniany modularnie bezpiecznym bypassem CAPTCHA-proof).

### D. Zewnętrzne Bazy
- OpenStreetMap, Google Maps, Esri (Mapy podkładowe XYZ).

## 7. Ograniczenia i Założenia Systemowe (Disclaimer)
Twórcy oparli funkcję na specyfice modelu agregacji państwa. KIUT uzależniony jest od lokalnych starostw - brak kreski sieci nie oznacza fizycznego jej braku w ziemi (szczególnie w Polsce, w starszych, niecyfryzowanych rejonach). System GDOŚ z kolei opiera się na granicach przyrodniczych, ale nie zwalnia to nigdy użytkownika docelowego z analizy gminnych Miejscowych Planów (MPZP), o czym jest on na bieżąco powiadamiany podczas korzystania z Asystenta poprzez dedykowane zastrzeżenia prawne wbudowane w layout narzędzia.
